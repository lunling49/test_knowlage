#### QA如何分析定位bug

##### QA做bug定位的意义是什么

###### 1、明确一个“问题”是不是真的是“bug”

​		----问题：与预期不符，表象

​		----bug：代码错误，实质

###### 2、避免来回扯皮，提高测试修复效率

​		----误报降低，原因明确

###### 3、有助于理解产品内部逻辑流程

​		----知其然，也知其所以然

###### 4、提升dev对QA的信任度

​		----靠谱！



##### QA做bug定位的几个误区

###### 1、心态误区：不明觉厉，与己无关

​		----bug定位没有那么高大上，三板斧会用就行

###### 2、手段误区：定位必须看代码

​		----大部分定位还用不上代码能力

###### 3、目标误区：所有问题都该被当做bug定位

​		----问题不一定是bug，即便是也得考虑性价比

###### 4、分工误区：dev不需要帮助QA的bug定位

​		----大家目标是一致的，dev需提供可测性支持



##### QA定位bug的大体流程

![image](https://github.com/lunling49/images/blob/master/%E5%AE%9A%E4%BD%8D%E8%B0%83%E8%AF%95.png)



##### bug定位经验建议

###### 1、碰到问题，别忙定位，首先请

​		----保存犯罪现场（截图）

​		----确认能复现

###### 2、先排除QA低级问题，避免被鄙视

​		----被测程序版本/配置项/网络环境，是否ok？

​		----是不是自己理解错误，本来就该如此

###### 3、手段多样化，被钻牛角尖，注意性价比

​		----多观察日志，多熟悉工具，搞不定就放

###### 4、建设自己的bug历史知识库

​		----有助于温故而知新

###### 5、小版本的新bug，可通过代码diff定位

​		----代码diff的部分是罪魁祸首，很快

###### 6、要求dev提高可测性

​		----合理的debug日志，中间结果dump

​		----方便可控的逻辑开关



##### bug定位手段

普通青年----日志，返回码，异常值

文艺青年----各种非侵入式观察工具

NB青年----代码走查，JPDA远程调试



##### web项目bug定位

###### 1、明确是浏览器端问题还是服务器端问题

​		----用fiddler/firebug看http内容是否正确

​		----到这一步，其实就可以算阶段性结论了！

###### 2、浏览器端问题

​		----用firebug做进一步定位

###### 3、服务端问题

​		----通过观察日志和接口内容缩小怀疑范围

​		----高级手段：JPDA远程调试



##### 一般系统的定位调试

![image](https://github.com/lunling49/images/blob/master/%E5%AE%9A%E4%BD%8D%E8%B0%83%E8%AF%95.png)



##### 浏览器端常见问题

​	是否是浏览器设置问题？

​	是否是浏览器兼容性问题？

​	用其他数据是否可以复现？

​	是否是cookie相关的问题？

​	是否正确发出了请求？

​	是否得到了正确的应答？

​	是否是网络硬件原因？

​	是否是JS跨域问题？

​	是否是前后台接口不一致问题？



##### 后台服务定位手段

###### 1、输入条件构造

​	网络通信包（驱动、桩、真实的上下游模块）

​	数据文件

​	配置文件（包括词表，黑白名单等）

​	共享内存

###### 2、输出检查

​	网络通信包

​	数据文件

​	日志（尤其是异常日志）

​	监控

​	系统监控：cpu，句柄，IO，内存

​	模块级监控：内存结构体信息

###### 3、调试debug

​	JPDA打断点



##### 后台服务常见问题

###### 自顶向下排查（从系统入口模块开始）

1、是内部逻辑问题还是下游数据问题？

- 是否是某些配置下发生的问题？
- 日志中是否发现线索？
- 系统资源情况中是否发现线索？
- 是否是边界值、并发等问题？

2、下游模块是否交互正常？

3、是否是多线程下的问题？

4、是否是大压力下的问题？

5、是否是不同模块间接口定义不一致？

6、是否和服务器软件版本及设置有关？



###### 自底向上排查（从系统末端模块开始）

1、最底层的模块是否正常收到了请求？

2、是内部逻辑问题还是上游请求问题？

​	



















